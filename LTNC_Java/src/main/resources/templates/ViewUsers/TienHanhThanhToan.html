<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
layout:decorate="~{layout/layout_main}">
<head>
<meta charset="utf-8">
<title>Insert title here</title>
</head>
<body>
<div layout:fragment="content-main">
	 <div class="sec sec__shopcart">
        
        <div class="container">
            <div class="nav-steps">
                <div class="nav-step__item waiting">
                    <span class="number">1</span>
                    <span class="txt">Chọn sản phẩm</span>
                </div>
                <div class="nav-step__item">
                    <span class="number">2</span>
                    <span class="txt">Nhập thông tin</span>
                </div>
                <div class="nav-step__item">
                    <span class="number">3</span>
                    <span class="txt">Xác nhận</span>
                </div>
            </div>
            <div class="row">
                <div class="sec__shopcart__info col-md-7 col-sm-7 col-xs-12">
                    <div class="box-user__info panel">
                        <div class="title">Thông tin cá nhân</div>
                        <div class="content">
                            <div class="row">
                                <div class="col-md-6 col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <div class="label">Họ tên</div>
                                        <input type="text" class="form-control" placeholder="Họ" th:value="${khachhang.hoten}" disabled>
                                    </div>
                                </div>
                                <div class="col-md-6 col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <div class="label">Tài khoản</div>
                                        <input type="text" class="form-control" placeholder="Tài khoản" th:value="${khachhang.tendangnhap}" disabled>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="label">Email</div>
                                <input type="text" class="form-control" placeholder="Email" th:value="${khachhang.email}"  disabled>
                            </div>
                        </div>
                    </div>
                    <div class="box-user__info panel">
                        <div class="title">Thông tin thanh toán và nhận hàng</div>
                        <div class="content">
                            <div class="row">
                                <div class="col-md-6 col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <div class="label">Số điện thoại:</div>
                                        <input type="text" class="form-control" placeholder="SĐT" id="txtSDT">
                                        <small id="errorSDT" class="form-text text-muted AnHienLoad">Không được để trống số diện thoại</small>
                                    </div>
                                </div>
                                <div class="col-md-6 col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <div class="label">Họ tên:</div>
                                        <input type="text" class="form-control" placeholder="Tên" id="txtTen">
                                        <small id="errorTen" class="form-text text-muted AnHienLoad">Không được để trống họ tên</small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="label">Email</div>
                                <input type="text" class="form-control" placeholder="Email" id="txtEmail">
                                <small id="errorEmail" class="form-text text-muted AnHienLoad">Không được để trống email</small>
                            </div>
                            <div class="form-group">
                                <div class="label">Địa chỉ:</div>
                                <input type="text" class="form-control" placeholder="Địa chỉ" id="txtDiaChi">
                                <small id="errorDiaChi" class="form-text text-muted AnHienLoad">Không được để trống địa chỉ</small>
                            </div>
                            <div class="row">
                                <div class="col-md-6 col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <div class="label">Tỉnh thành:</div>
                                        <input type="text" class="form-control" placeholder="Tỉnh thành" id="txtTinhThanh">
                                        <small id="errorTinhThanh" class="form-text text-muted AnHienLoad">Không được để trống tỉnh thành</small>
                                    </div>
                                </div>
                                <div class="col-md-6 col-xs-12 col-sm-6">
                                    <div class="form-group">
                                        <div class="label">Quận huyện:</div>
                                         <input type="text" class="form-control" placeholder="Quận huyện" id="txtQuanHuyen">
                                         <small id="errorQuanHuyen" class="form-text text-muted AnHienLoad">Không được để trống quận huyện</small>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="label">Ghi chú:</div>
                                <textarea name="" cols="30" rows="10" class="form-control" placeholder="Nội dung" id="txtNoiDung"></textarea>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" class="form-control" value="1" id="HinhThucThanhToan">
                    <div class="box-user__info panel">
                        <div class="title">Hình thức thanh toán</div>
                        <div class="content">
                            <div class="list-payment">
                                <div class="item active hinthucthanhtoan hinthucthanhtoan1">
                                	<a href="javascript:void(0)" onclick="ChonHinhThucThanhToan(1)">
                                		<img src="uploads/payment/bank-transfer.png" alt="">
                                	</a>
                                </div>
                                <div class="item hinthucthanhtoan hinthucthanhtoan2">
                                	<a href="javascript:void(0)" onclick="ChonHinhThucThanhToan(2)">
                                		<img src="uploads/payment/mastercard.png" alt="">
                                	</a>
                                </div>
                                <div class="item hinthucthanhtoan hinthucthanhtoan3">
                                	<a href="javascript:void(0)" onclick="ChonHinhThucThanhToan(3)">
                                		<img src="uploads/payment/paypal.png" alt="">
                                	</a>
                                </div>
                                <div class="item hinthucthanhtoan hinthucthanhtoan4">
                                	<a href="javascript:void(0)" onclick="ChonHinhThucThanhToan(4)">
                                		<img src="uploads/payment/visa.png" alt="">
                                	</a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-5 col-sm-5 col-xs-12">
                    <div class="title">Giỏ hàng</div>
                    <div class="content">
                        <div class="product__shopcart">
                            <div class="product__list" id="GioHangChiTiet">


                            </div>
                        </div>
                    </div>
                    <div class="list-button">
                        <div class="row">
                            <div class="col-sm-6 col-xs-12">
                                <a href="/" class="btn btn__back">Quay lại</a>
                            </div>
                            <div class="col-sm-6 col-xs-12">
                                <a class="btn btn__next" href="javascript:void(0)" onclick="ThanhToanDonHang()">Tiếp tục thanh toán</a>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script type="text/javascript" src="vendor/js/jquery.2.1.1.min.js"></script>
	<script>
		$(document).ready(function() {
			$.get("/ChiTietGioHang", {}, function (data) {
				if(data.Icon=="success"){
					$("#GioHangChiTiet").append(data.Data);
				}
			});
		});
		function ThanhToanDonHang()
		{
			var txtSDT=$("#txtSDT").val();
			var txtTen=$("#txtTen").val();
			var txtEmail=$("#txtEmail").val();
			var txtDiaChi=$("#txtDiaChi").val();
			var txtTinhThanh=$("#txtTinhThanh").val();
			var txtQuanHuyen=$("#txtQuanHuyen").val();
			var txtNoiDung=$("#txtNoiDung").val();
			var HinhThucThanhToan=$("#HinhThucThanhToan").val();
			if(txtSDT=='')
			{
				$("#errorSDT").removeClass("AnHienLoad");
			}
			if(txtTen=='')
			{
				$("#errorTen").removeClass("AnHienLoad");
			}
			if(txtEmail=='')
			{
				$("#errorEmail").removeClass("AnHienLoad");
			}
			if(txtDiaChi=='')
			{
				$("#errorDiaChi").removeClass("AnHienLoad");
			}
			if(txtTinhThanh=='')
			{
				$("#errorTinhThanh").removeClass("AnHienLoad");
			}
			if(txtQuanHuyen=='')
			{
				$("#errorQuanHuyen").removeClass("AnHienLoad");
			}
			
			if(txtSDT!='' && txtTen!='' && txtEmail!='' && txtDiaChi!='' && txtTinhThanh!='' && txtQuanHuyen!='')
			{
				$.post("/ThucHienThanhToan", { "txtSDT": txtSDT,"txtTen":txtTen,"txtEmail":txtEmail,"txtDiaChi":txtDiaChi,"txtTinhThanh":txtTinhThanh,"txtQuanHuyen":txtQuanHuyen,"txtNoiDung":txtNoiDung,"HinhThucThanhToan":HinhThucThanhToan}, function (data) {
					if(data.Icon="success")
					{
						location.href="/XacNhanThanhToan";
					}
					else
					{
						MessageBox(data.Title,data.Icon);
					}
				})
			}
		}
	</script>
</div>
</body>
</html>