<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.LTNC.LTNC_Java.mapper.CustomMapper">
   <resultMap id="BaseResultMap" type="com.LTNC.LTNC_Java.model.SanPham">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Dec 01 20:45:05 ICT 2021.
    -->
    <id column="idSp" jdbcType="INTEGER" property="idsp" />
    <result column="ten" jdbcType="NVARCHAR" property="ten" />
    <result column="gia" jdbcType="DOUBLE" property="gia" />
    <result column="giaKm" jdbcType="DOUBLE" property="giakm" />
    <result column="trangThai" jdbcType="INTEGER" property="trangthai" />
    <result column="idLoai" jdbcType="INTEGER" property="idloai" />
    <result column="idThuongHieu" jdbcType="INTEGER" property="idthuonghieu" />
    <result column="idUser" jdbcType="INTEGER" property="iduser" />
    <result column="soLuong" jdbcType="INTEGER" property="soluong" />
    <result column="trangThaiMieuTa" jdbcType="NVARCHAR" property="trangthaimieuta" />
    <result column="anhDaiDien" jdbcType="NVARCHAR" property="anhdaidien" />
    <result column="MieuTaSanPhamNoiBat" jdbcType="NVARCHAR" property="mieutasanphamnoibat" />
  </resultMap>
  
  <resultMap extends="BaseResultMap" id="ResultMapWithBLOBs" type="com.LTNC.LTNC_Java.model.SanPhamWithBLOBs">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Dec 01 20:45:05 ICT 2021.
    -->
    <result column="moTa" jdbcType="LONGNVARCHAR" property="mota" />
    <result column="chiTiet" jdbcType="LONGNVARCHAR" property="chitiet" />
  </resultMap>
  
   <resultMap id="BaseResultMapTinTuc" type="com.LTNC.LTNC_Java.model.TinTuc">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 03 17:43:40 ICT 2021.
    -->
    <id column="idTin" jdbcType="INTEGER" property="idtin" />
    <result column="tieuDe" jdbcType="NVARCHAR" property="tieude" />
    <result column="anh" jdbcType="NVARCHAR" property="anh" />
    <result column="ngayTao" jdbcType="TIMESTAMP" property="ngaytao" />
    <result column="idUser" jdbcType="INTEGER" property="iduser" />
  </resultMap>
  <resultMap extends="BaseResultMapTinTuc" id="ResultMapWithBLOBsTinTuc" type="com.LTNC.LTNC_Java.model.TinTuc">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Dec 03 17:43:40 ICT 2021.
    -->
    <result column="noiDung" jdbcType="LONGNVARCHAR" property="noidung" />
  </resultMap>
  
   <resultMap id="BaseResultMapKhachHang" type="com.LTNC.LTNC_Java.model.KhachHang">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 04 22:35:50 ICT 2021.
    -->
    <id column="idKhach" jdbcType="INTEGER" property="idkhach" />
    <result column="hoTen" jdbcType="NVARCHAR" property="hoten" />
    <result column="diaChi" jdbcType="NVARCHAR" property="diachi" />
    <result column="email" jdbcType="VARCHAR" property="email" />
    <result column="sdt" jdbcType="CHAR" property="sdt" />
    <result column="tenDangNhap" jdbcType="NVARCHAR" property="tendangnhap" />
    <result column="matKhau" jdbcType="NVARCHAR" property="matkhau" />
    <result column="trangThai" jdbcType="BIT" property="trangthai" />
  </resultMap>
  
   <resultMap id="BaseResultMapDonHang" type="com.LTNC.LTNC_Java.model.DonHang">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Dec 04 22:35:50 ICT 2021.
    -->
    <id column="idDon" jdbcType="INTEGER" property="iddon" />
    <result column="ngayDat" jdbcType="TIMESTAMP" property="ngaydat" />
    <result column="diaChiGiao" jdbcType="NVARCHAR" property="diachigiao" />
    <result column="moTa" jdbcType="NVARCHAR" property="mota" />
    <result column="tongTien" jdbcType="DOUBLE" property="tongtien" />
    <result column="idKhach" jdbcType="INTEGER" property="idkhach" />
    <result column="idUser" jdbcType="INTEGER" property="iduser" />
    <result column="trangThai" jdbcType="BIT" property="trangthai" />
  </resultMap>
  
  <select id="GetDataSP" parameterType="map" resultType="map">
  	select * from SanPham Where ten=#{ten}
  </select>
  
  <select id="GetSanPhamNoiBat" parameterType="map" resultType="map">
  	select * from SanPham Where trangThaiMieuTa=#{TrangThai}
  </select>
  
  <select id="LayThongTinChiTietSanPham" parameterType="map" resultMap="ResultMapWithBLOBs">
  	select * from SanPham Where idSp=#{IdSanPham}
  </select>
  
  <select id="GetThongTinXemNhanhSanPham" parameterType="map" resultType="map">
  	select * from SanPham as sp
	left Join ThuongHieu as th on sp.idThuongHieu=th.idThuongHieu
	left Join LoaiSp as lsp on lsp.idLoai=sp.idLoai
	where sp.idSp=#{IdSanPham}
  </select>
  
   <select id="GetAnhXemNhanhSanPham" parameterType="map" resultType="map">
  	select * from Anh
	where idSp=#{IdSanPham}
  </select>
  
  <select id="GetDanhSanPham" parameterType="map" resultType="map">
  	select top 8 * from SanPham order by ten asc
  </select>
  
  <select id="GetSoLuongSanPham" resultType="java.lang.Long">
  	select COUNT(ten) from SanPham
  </select>
  
  <select id="GetAllDanhSanPham" parameterType="map" resultType="map">
  	select * from SanPham order by ten asc
  </select>
  
   <select id="GetDanhSachTinTuc" parameterType="map" resultType="map">
  	select top 4 * from TinTuc order by ngayTao asc
  </select>
  
  <select id="GetSoLuongTinTuc" resultType="java.lang.Long">
  	select COUNT(idTin) from TinTuc
  </select>
  
  <select id="GetAllDanhSachTinTuc" parameterType="map" resultType="map">
  	select * from TinTuc order by ngayTao asc
  </select>
  
   <select id="GetTinTucLienQuan" parameterType="map" resultType="map">
  	select top 3 * from TinTuc
	ORDER BY NEWID()  
  </select>
  
  <select id="GetChiTietTinTuc" parameterType="map" resultType="map">
  	select * from TinTuc
	where idTin=#{IdTinTuc}
  </select>
  
  <select id="GetDanhGiaSanPham" parameterType="map" resultType="map">
  	select * from DanhGia as dg
	join KhachHang as kh on dg.idKhach=kh.idKhach
	join SanPham as sp on sp.idSp=dg.idSp
	where sp.idSp=#{IdSanPham}
  </select>
  
  <select id="GetAnhSanPham" parameterType="map" resultType="map">
  	select * from Anh as a
	where a.idSp=#{IdSanPham}
  </select>
  
  <select id="GetThongTinChiTietSanPham" parameterType="map" resultType="map">
  	select * from SanPham as sp
	left Join ThuongHieu as th on sp.idThuongHieu=th.idThuongHieu
	left Join LoaiSp as lsp on lsp.idLoai=sp.idLoai
	where sp.idSp=#{IdSanPham}
  </select>
  
  <select id="GetThongTinChiTietKhachHang" parameterType="map" resultMap="BaseResultMapKhachHang">
  	select top 1 * from KhachHang
	where tenDangNhap=#{txtTenDangNhap} and matKhau=#{txtMatKhau}
  </select>
  
   <select id="GetDanhSachThuongHieu" parameterType="map" resultType="map">
  	select * from ThuongHieu
  </select>
  
  <select id="LayThongTinKhachHang" parameterType="map" resultMap="BaseResultMapKhachHang">
  	select top 1 * from KhachHang where idKhach=#{IdKhachHang}
  </select>
  
  <select id="LayThongDonHang" parameterType="map" resultMap="BaseResultMapDonHang">
  	select top 1 * from DonHang where ngayDat=#{ngayDat}
  </select>
  
 <select id="DanhSachSanPhamTheoThuongHieu" parameterType="map" resultType="map">
  	select * from SanPham
	where idthuonghieu=#{idthuonghieu}
  </select>
  
  <select id="DanhSachSanPhamTimKiem" parameterType="map" resultType="map">
  	select * from SanPham
	where ten like '%'+#{TuKhoa}+'%'
  </select>
  
   <select id="GetSanPhamLienQuan" parameterType="map" resultType="map">
  	select top 8 * from SanPham ORDER BY NEWID()  
  </select>
</mapper>